/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package com.xprodswing.principal;


import java.awt.print.PrinterException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.text.NumberFormat;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author phana
 */
public class GestionCommande extends javax.swing.JFrame {

    /**
     * Creates new form Fournisseur
     */
    public GestionCommande() {
        initComponents();
        this.setTitle("Xprod gestion des fournisseurs");
        setLocationRelativeTo(null);
        tableUpdate();
        tableUpdateClient();
        Date();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel3 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        txtNOM = new javax.swing.JTextField();
        txtPRENOM = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        txtREF = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        txtDESIGNATION = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        txtDESCRIPTIF = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        txtPRIXUHT = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        txtQUANTITE = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        txtTOTALHT = new javax.swing.JTextField();
        jPanel2 = new javax.swing.JPanel();
        btnRetour = new javax.swing.JButton();
        jPanel4 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tabPRODUIT = new javax.swing.JTable();
        jPanel5 = new javax.swing.JPanel();
        jScrollPane5 = new javax.swing.JScrollPane();
        tabCLIENT = new javax.swing.JTable();
        btnAjouterClient = new javax.swing.JButton();
        jPanel7 = new javax.swing.JPanel();
        jScrollPane4 = new javax.swing.JScrollPane();
        tabCOMMANDE = new javax.swing.JTable();
        jLabel10 = new javax.swing.JLabel();
        txtFRAISPORT = new javax.swing.JTextField();
        txtTVA = new javax.swing.JTextField();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        txtPRIXTTC = new javax.swing.JTextField();
        btnValider = new javax.swing.JButton();
        btnSuppLigne = new javax.swing.JButton();
        jPanel6 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        txtFacture = new javax.swing.JTextArea();
        btnCreer = new javax.swing.JButton();
        btnImprimer = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(102, 102, 102));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel3.setBackground(new java.awt.Color(102, 102, 102));

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("GESTION DES COMMANDES");

        jPanel1.setBackground(new java.awt.Color(102, 102, 102));
        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 255, 255), 2), "Liste de Commandes", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(255, 255, 255))); // NOI18N

        jLabel2.setForeground(new java.awt.Color(255, 255, 255));
        jLabel2.setText("Nom : ");

        txtNOM.setEditable(false);
        txtNOM.setBackground(new java.awt.Color(102, 102, 102));
        txtNOM.setForeground(new java.awt.Color(255, 255, 255));

        txtPRENOM.setEditable(false);
        txtPRENOM.setBackground(new java.awt.Color(102, 102, 102));
        txtPRENOM.setForeground(new java.awt.Color(255, 255, 255));

        jLabel3.setForeground(new java.awt.Color(255, 255, 255));
        jLabel3.setText("Prenom :");

        txtREF.setEditable(false);
        txtREF.setBackground(new java.awt.Color(102, 102, 102));
        txtREF.setForeground(new java.awt.Color(255, 255, 255));

        jLabel4.setForeground(new java.awt.Color(255, 255, 255));
        jLabel4.setText("Référence :");

        jLabel5.setForeground(new java.awt.Color(255, 255, 255));
        jLabel5.setText("Désignation");

        txtDESIGNATION.setEditable(false);
        txtDESIGNATION.setBackground(new java.awt.Color(102, 102, 102));
        txtDESIGNATION.setForeground(new java.awt.Color(255, 255, 255));

        jLabel6.setForeground(new java.awt.Color(255, 255, 255));
        jLabel6.setText("Descritif :");

        txtDESCRIPTIF.setEditable(false);
        txtDESCRIPTIF.setBackground(new java.awt.Color(102, 102, 102));
        txtDESCRIPTIF.setForeground(new java.awt.Color(255, 255, 255));

        jLabel7.setForeground(new java.awt.Color(255, 255, 255));
        jLabel7.setText("Prix Unitaire HT :");

        txtPRIXUHT.setEditable(false);
        txtPRIXUHT.setBackground(new java.awt.Color(102, 102, 102));
        txtPRIXUHT.setForeground(new java.awt.Color(255, 255, 255));

        jLabel8.setForeground(new java.awt.Color(255, 255, 255));
        jLabel8.setText("Quantité :");

        txtQUANTITE.setBackground(new java.awt.Color(102, 102, 102));
        txtQUANTITE.setForeground(new java.awt.Color(255, 255, 255));

        jLabel9.setForeground(new java.awt.Color(255, 255, 255));
        jLabel9.setText("Prix Total HT:");

        txtTOTALHT.setBackground(new java.awt.Color(102, 102, 102));
        txtTOTALHT.setForeground(new java.awt.Color(255, 255, 255));

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel9, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtTOTALHT))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtQUANTITE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtPRIXUHT))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtDESCRIPTIF))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtDESIGNATION))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtREF))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtPRENOM))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtNOM, javax.swing.GroupLayout.PREFERRED_SIZE, 218, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(36, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtNOM, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtPRENOM, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtREF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtDESIGNATION, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtDESCRIPTIF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtPRIXUHT, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtQUANTITE, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel9, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtTOTALHT, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel2.setBackground(new java.awt.Color(102, 102, 102));

        btnRetour.setBackground(new java.awt.Color(102, 51, 255));
        btnRetour.setForeground(new java.awt.Color(204, 255, 255));
        btnRetour.setText("Retour");
        btnRetour.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnRetourActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addContainerGap(249, Short.MAX_VALUE)
                .addComponent(btnRetour, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(92, 92, 92))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(31, 31, 31)
                .addComponent(btnRetour)
                .addContainerGap(44, Short.MAX_VALUE))
        );

        jPanel4.setBackground(new java.awt.Color(102, 102, 102));
        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Liste des Produits", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(255, 255, 255))); // NOI18N

        tabPRODUIT.setBackground(new java.awt.Color(102, 102, 102));
        tabPRODUIT.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 255, 255)));
        tabPRODUIT.setForeground(new java.awt.Color(255, 255, 255));
        tabPRODUIT.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID PRODUIT", "REFERENCE", "DESIGNATION", "DESCRIPTIF", "PRIX UHT"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tabPRODUIT.setFocusable(false);
        tabPRODUIT.setGridColor(new java.awt.Color(204, 255, 255));
        tabPRODUIT.setRequestFocusEnabled(false);
        tabPRODUIT.setSelectionBackground(new java.awt.Color(204, 255, 255));
        tabPRODUIT.setSelectionForeground(new java.awt.Color(102, 51, 255));
        tabPRODUIT.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tabPRODUITMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(tabPRODUIT);

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 568, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 335, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        jPanel5.setBackground(new java.awt.Color(102, 102, 102));
        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Liste des Clients", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(255, 255, 255))); // NOI18N

        tabCLIENT.setBackground(new java.awt.Color(102, 102, 102));
        tabCLIENT.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 255, 255)));
        tabCLIENT.setForeground(new java.awt.Color(255, 255, 255));
        tabCLIENT.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID CLIENT", "NOM", "PRENOM", "ADRESSE", "CODEPOSTAL", "VILLE", "PAYS", "TELEPHONE", "EMAIL"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tabCLIENT.setFocusable(false);
        tabCLIENT.setGridColor(new java.awt.Color(204, 255, 255));
        tabCLIENT.setRequestFocusEnabled(false);
        tabCLIENT.setSelectionBackground(new java.awt.Color(204, 255, 255));
        tabCLIENT.setSelectionForeground(new java.awt.Color(102, 51, 255));
        tabCLIENT.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tabCLIENTMouseClicked(evt);
            }
        });
        jScrollPane5.setViewportView(tabCLIENT);

        btnAjouterClient.setBackground(new java.awt.Color(204, 255, 255));
        btnAjouterClient.setForeground(new java.awt.Color(102, 102, 255));
        btnAjouterClient.setText("Ajouter un nouveau client");
        btnAjouterClient.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAjouterClientActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane5)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(313, 313, 313)
                .addComponent(btnAjouterClient, javax.swing.GroupLayout.PREFERRED_SIZE, 184, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(345, Short.MAX_VALUE))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 286, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(btnAjouterClient)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel7.setBackground(new java.awt.Color(102, 102, 102));
        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Commande", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(255, 255, 255))); // NOI18N

        tabCOMMANDE.setBackground(new java.awt.Color(102, 102, 102));
        tabCOMMANDE.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 255, 255)));
        tabCOMMANDE.setForeground(new java.awt.Color(255, 255, 255));
        tabCOMMANDE.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID PRODUIT", "REFERENCE", "DESIGNATION", "DESCRIPTIF", "PRIXUHT", "QUANTITE", "PRIXTHT"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tabCOMMANDE.setFocusable(false);
        tabCOMMANDE.setGridColor(new java.awt.Color(204, 255, 255));
        tabCOMMANDE.setRequestFocusEnabled(false);
        tabCOMMANDE.setSelectionBackground(new java.awt.Color(204, 255, 255));
        tabCOMMANDE.setSelectionForeground(new java.awt.Color(102, 51, 255));
        tabCOMMANDE.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tabCOMMANDEMouseClicked(evt);
            }
        });
        jScrollPane4.setViewportView(tabCOMMANDE);

        jLabel10.setForeground(new java.awt.Color(255, 255, 255));
        jLabel10.setText("Frais de Port :");

        txtFRAISPORT.setEditable(false);
        txtFRAISPORT.setBackground(new java.awt.Color(102, 102, 102));
        txtFRAISPORT.setForeground(new java.awt.Color(255, 255, 255));

        txtTVA.setEditable(false);
        txtTVA.setBackground(new java.awt.Color(102, 102, 102));
        txtTVA.setForeground(new java.awt.Color(255, 255, 255));

        jLabel11.setForeground(new java.awt.Color(255, 255, 255));
        jLabel11.setText("T.V.A :");

        jLabel12.setForeground(new java.awt.Color(255, 255, 255));
        jLabel12.setText("PRIX TTC :");

        txtPRIXTTC.setEditable(false);
        txtPRIXTTC.setBackground(new java.awt.Color(102, 102, 102));
        txtPRIXTTC.setForeground(new java.awt.Color(255, 255, 255));

        btnValider.setBackground(new java.awt.Color(204, 255, 255));
        btnValider.setForeground(new java.awt.Color(102, 102, 255));
        btnValider.setText("Valider la commande");
        btnValider.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnValiderActionPerformed(evt);
            }
        });

        btnSuppLigne.setBackground(new java.awt.Color(204, 255, 255));
        btnSuppLigne.setForeground(new java.awt.Color(102, 102, 255));
        btnSuppLigne.setText("Supprimer la ligne");
        btnSuppLigne.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSuppLigneActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
        jPanel7.setLayout(jPanel7Layout);
        jPanel7Layout.setHorizontalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane4, javax.swing.GroupLayout.DEFAULT_SIZE, 614, Short.MAX_VALUE)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel11)
                    .addComponent(jLabel10)
                    .addComponent(jLabel12))
                .addGap(33, 33, 33)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtPRIXTTC, javax.swing.GroupLayout.DEFAULT_SIZE, 180, Short.MAX_VALUE)
                    .addComponent(txtFRAISPORT)
                    .addComponent(txtTVA))
                .addGap(92, 92, 92)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnValider, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnSuppLigne, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(101, 101, 101))
        );
        jPanel7Layout.setVerticalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 253, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(txtFRAISPORT, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel10))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel11)
                            .addComponent(txtTVA, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addGap(19, 19, 19)
                        .addComponent(btnSuppLigne)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtPRIXTTC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel12)
                    .addComponent(btnValider))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel6.setBackground(new java.awt.Color(102, 102, 102));
        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Facture", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(255, 255, 255))); // NOI18N

        txtFacture.setColumns(20);
        txtFacture.setRows(5);
        jScrollPane2.setViewportView(txtFacture);

        btnCreer.setBackground(new java.awt.Color(204, 255, 255));
        btnCreer.setForeground(new java.awt.Color(102, 102, 255));
        btnCreer.setText("Créer la facture");
        btnCreer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCreerActionPerformed(evt);
            }
        });

        btnImprimer.setBackground(new java.awt.Color(204, 255, 255));
        btnImprimer.setForeground(new java.awt.Color(102, 102, 255));
        btnImprimer.setText("Imprimer la facture");
        btnImprimer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnImprimerActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane2)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGap(52, 52, 52)
                .addComponent(btnCreer)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 86, Short.MAX_VALUE)
                .addComponent(btnImprimer)
                .addGap(61, 61, 61))
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 297, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnCreer)
                    .addComponent(btnImprimer))
                .addGap(0, 0, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(27, 27, 27)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(663, 663, 663))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                .addGap(138, 138, 138))
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 1265, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(36, 36, 36)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(27, 27, 27)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(1056, Short.MAX_VALUE))
        );

        getContentPane().add(jPanel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1610, -1));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    Connection con; // déclaratioon de connection 
    PreparedStatement pst; 
    Connection con2;
    PreparedStatement pst2;
    Connection con3;
    PreparedStatement pst3;
    
    private void tableUpdate(){
            int cpt;
            
        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
                    con = DriverManager.getConnection("jdbc:mysql://localhost/xproddb", "root",""); // Demande au DriverManager (gestionnaire de manager) de récupérer et de stocker les infos dans la variable con
                    pst = con.prepareStatement("SELECT * FROM produits");
                    ResultSet rs = pst.executeQuery();
                    ResultSetMetaData rsmd = rs.getMetaData();
                    cpt = rsmd.getColumnCount();
                    DefaultTableModel dtm = (DefaultTableModel) tabPRODUIT.getModel();
                    dtm.setRowCount(0);
                    
                    while(rs.next()){
                        Vector  vect = new Vector();
                        
                        for(int i = 1; i <= cpt; i++){
                            vect.add(rs.getString("IDPRODUIT"));
                            vect.add(rs.getString("REF"));
                            vect.add(rs.getString("DESIGNATION"));
                            vect.add(rs.getString("DESCRIPTIF"));
                            vect.add(rs.getString("PRIXUHT"));
                            
                        }
                    dtm.addRow(vect);
                    }
                            
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(XprodDesktopAdmin.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(XprodDesktopAdmin.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
        
        
    private void tableUpdateClient(){
        int cpt2;
        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
                    con2 = DriverManager.getConnection("jdbc:mysql://localhost/xproddb", "root",""); // Demande au DriverManager (gestionnaire de manager) de récupérer et de stocker les infos dans la variable con
                    pst2 = con2.prepareStatement("SELECT * FROM clients");
                    ResultSet rs2 = pst2.executeQuery();
                    ResultSetMetaData rsmd2 = rs2.getMetaData();
                    cpt2 = rsmd2.getColumnCount();
                    DefaultTableModel dtm2 = (DefaultTableModel) tabCLIENT.getModel();
                    dtm2.setRowCount(0);
                    
                    while(rs2.next()){
                        Vector  vect = new Vector();
                        
                        for(int i = 1; i <= cpt2; i++){
                            vect.add(rs2.getString("IDCLIENT"));
                            vect.add(rs2.getString("NOM"));
                            vect.add(rs2.getString("PRENOM"));
                            vect.add(rs2.getString("ADRESSE"));
                            vect.add(rs2.getString("CODEPOSTAL"));
                            vect.add(rs2.getString("VILLE"));
                            vect.add(rs2.getString("PAYS"));
                            vect.add(rs2.getString("TELEPHONE"));
                            vect.add(rs2.getString("EMAIL"));
                            
                        }
                    dtm2.addRow(vect);
                    }
                            
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(XprodDesktopAdmin.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(XprodDesktopAdmin.class.getName()).log(Level.SEVERE, null, ex);
        }
        
    }
    
    String txtDATECMD = "null";
    private void Date(){
        txtDATECMD = String.format(JOptionPane.showInputDialog(null,"Entrer la date au format JJ/MM/AAAA"));
        
    }
    
    private void btnRetourActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRetourActionPerformed
       
        dispose();
       
        
    }//GEN-LAST:event_btnRetourActionPerformed
    double fraisPort2 = 0;
    
    int nbARTICLE = 0;
    private void tabPRODUITMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tabPRODUITMouseClicked
        
        // Pour selectionner les informations d'un champ
        double som = 0.00;
        double totalTTC = 0;
        double prixTVA = 0.00;
        double fraisPort = 0.00;
       
        DefaultTableModel dtm = (DefaultTableModel) tabPRODUIT.getModel();
        int selectedIndex = tabPRODUIT.getSelectedRow();
        
        // remplis les champs de "Liste de commande"
        txtREF.setText(dtm.getValueAt(selectedIndex, 1).toString()); //récupere les données dans dtm, la valeur 1 dans le champs selectionné
        txtDESIGNATION.setText(dtm.getValueAt(selectedIndex, 2).toString());
        txtDESCRIPTIF.setText(dtm.getValueAt(selectedIndex, 3).toString());
        txtPRIXUHT.setText(dtm.getValueAt(selectedIndex, 4).toString());
        
        //Initialisation des données pour le tableau commande au moment du clickedMouse
        String idClient = dtm.getValueAt(selectedIndex, 0).toString();
        String txtREF = dtm.getValueAt(selectedIndex, 1).toString();
        String txtDESIGNATION = dtm.getValueAt(selectedIndex, 2).toString();
        String txtDESCRIPTIF = dtm.getValueAt(selectedIndex, 3).toString();
        double txtPRIXUHT = Double.parseDouble(dtm.getValueAt(selectedIndex, 4).toString());
        
        
        int qte = Integer.parseInt(JOptionPane.showInputDialog(null,"Entrer la quantité ! "));
        nbARTICLE = nbARTICLE + qte;
        double tot = txtPRIXUHT * qte;
        fraisPort = Integer.parseInt(JOptionPane.showInputDialog(null,"Entrer les frais de port !"));
        
        int tva = Integer.parseInt(JOptionPane.showInputDialog(null,"Entrer la TVA ! "));
        dtm = (DefaultTableModel) tabCOMMANDE.getModel();
        
        dtm.addRow(new Object[] //création d'un tableu effémere afin de stocker les informations pour les mettre dans "commande"
            {
            idClient,
            txtREF,
            txtDESIGNATION,
            txtDESCRIPTIF,
            txtPRIXUHT,
            qte,
            tot
            }
        );
        
        
        //JOptionPane.showMessageDialog(this, tabCOMMANDE.getValueAt((int)0,6).toString());
        for(int i = 0; i<tabCOMMANDE.getRowCount(); i++){
            
            som = som + Double.parseDouble(tabCOMMANDE.getValueAt((int)i,6).toString());
            prixTVA = som * tva / 100;
            totalTTC = som + prixTVA + fraisPort;
        }
        
        NumberFormat format = NumberFormat.getInstance();
        format.setMinimumFractionDigits(1);
        
        //JOptionPane.showMessageDialog(null, (format.format(prixTVA)));
        
        
        
        if(fraisPort>=fraisPort2){
             txtFRAISPORT.setText(Double.toString(fraisPort));
             fraisPort2 = fraisPort;
        }else{
             txtFRAISPORT.setText(Double.toString(fraisPort2));
        }
        
        txtQUANTITE.setText(Integer.toString(qte));
        txtTOTALHT.setText(Double.toString(tot));
        //totalTTC = Double.parseDouble(format.format(totalTTC));
        txtPRIXTTC.setText(Double.toString(totalTTC));
        //prixTVA = Double.parseDouble(format.format(prixTVA));
        txtTVA.setText(Double.toString(prixTVA));
  
        
        
       
        
        
        
    }//GEN-LAST:event_tabPRODUITMouseClicked

    private void btnImprimerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnImprimerActionPerformed
        try {
            //Imprimer la facture
            boolean complete = txtFacture.print();
            
            if(complete){
                JOptionPane.showMessageDialog(null, "Impression fini","Message",JOptionPane.INFORMATION_MESSAGE);
            }else{
                JOptionPane.showMessageDialog(null,"Impression en cours ...","Imprimante",JOptionPane.ERROR_MESSAGE);
            }
        } catch (PrinterException ex) {
            Logger.getLogger(GestionCommande.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_btnImprimerActionPerformed

    private void btnCreerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCreerActionPerformed
        // Crééation de la facture
        double totalTTC = Double.parseDouble(txtPRIXTTC.getText());
        double tva = Double.parseDouble(txtTVA.getText());
        double fraisPort = Double.parseDouble(txtFRAISPORT.getText());
        double totalHT = totalTTC - tva -fraisPort;
        String dateCmd = txtDATECMD;
        
        //int qte = Integer.getInteger(txtQUANTITE.getText());
        String prenomClient = txtPRENOM.getText();
        String nomClient = txtNOM.getText();
        
        DefaultTableModel model = new DefaultTableModel();
        model = (DefaultTableModel)tabCOMMANDE.getModel();
        
        txtFacture.setText(txtFacture.getText() + "************************************************************************************************\n");
        txtFacture.setText(txtFacture.getText() + "*                                           FACTURE XPROD                                      *\n");
        txtFacture.setText(txtFacture.getText() + "************************************************************************************************\n");
        //Name
        txtFacture.setText(txtFacture.getText() + "\t" + "Date de la commande : " + txtDATECMD + "\n");
        txtFacture.setText(txtFacture.getText() + "\t" + "Nom du client : " + nomClient + "\n");
        txtFacture.setText(txtFacture.getText() + "\t" + "Prénom du client : " + prenomClient + "\n");
        txtFacture.setText(txtFacture.getText() + "\t"+"\n");
        
        //Heading
        txtFacture.setText(txtFacture.getText() + "REF"+"\t"+"DESIGNATION"+"\t"+"DESCRIPTIF"+"\t"+"\t"+"PRIX UHT"+"\t"+"QUANTITE"+"\t"+"PRIXTHT"+"\n");
        
        for(int i = 0; i< model.getRowCount(); i++){
            
            String ref = (String)model.getValueAt(i,1); //(String) permet de CASTER la valeur pour le rendre en String
            String design = (String)model.getValueAt(i,2);
            String descrip = (String)model.getValueAt(i,3);
            double prixU = (double)model.getValueAt(i,4); // CASTER en double
            int qte = (int)model.getValueAt(i,5);
            double prixTHT = (double)model.getValueAt(i, 6);
            
        txtFacture.setText(txtFacture.getText() + ref +"\t"+ design +"\t"+ descrip +"\t"+ prixU +"\t"+ qte +"\t"+ prixTHT+"\n");   
        }
        
        txtFacture.setText(txtFacture.getText() + "\n");
        txtFacture.setText(txtFacture.getText() + "\t" + "\t" + "Total HT : " + totalHT + "\n");
        txtFacture.setText(txtFacture.getText() + "\t" + "\t" + "Frais de Port : " + fraisPort + "\n");
        txtFacture.setText(txtFacture.getText() + "\t" + "\t" + "TVA : " + tva + "\n");
        txtFacture.setText(txtFacture.getText() + "\t" + "\t" + "Total TTC : " + totalTTC + "\n");
        txtFacture.setText(txtFacture.getText() + "\n");
        txtFacture.setText(txtFacture.getText() + "*************************************************************************************************\n");
        txtFacture.setText(txtFacture.getText() + "                       XPROD VOUS REMERCIE POUR VOTRE COMMANDE ! A BIENTOT !                     \n");
        
        
    }//GEN-LAST:event_btnCreerActionPerformed

    private void tabCOMMANDEMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tabCOMMANDEMouseClicked
        DefaultTableModel dtm = (DefaultTableModel) tabCOMMANDE.getModel();
        int selectedIndex = tabCOMMANDE.getSelectedRow();
        
        
    }//GEN-LAST:event_tabCOMMANDEMouseClicked

    private void tabCLIENTMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tabCLIENTMouseClicked
        DefaultTableModel dtm = (DefaultTableModel) tabCLIENT.getModel();
        int selectedIndex = tabCLIENT.getSelectedRow();
        
        txtNOM.setText(dtm.getValueAt(selectedIndex, 1).toString()); //récupere les données dans dtm, la valeur 1 dans le champs selectionné
        txtPRENOM.setText(dtm.getValueAt(selectedIndex, 2).toString());
                                        
    }//GEN-LAST:event_tabCLIENTMouseClicked

    private void btnValiderActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnValiderActionPerformed
       
        
       NumberFormat format = NumberFormat.getInstance();
       format.setMinimumFractionDigits(1);
       
       String dateCmd = txtDATECMD;
       String fraisPort = txtFRAISPORT.getText();
       int nbArticle = nbARTICLE;
       String totalHT = txtTOTALHT.getText();
       String totalTTC = txtPRIXTTC.getText();
       String tva = txtTVA.getText();
       String nom = txtNOM.getText();
       String Prenom = txtPRENOM.getText();
       
      
       
       try {
            Class.forName("com.mysql.cj.jdbc.Driver"); //Récupère le driver jdbc dans une classe
            con3 = DriverManager.getConnection("jdbc:mysql://localhost/xproddb", "root","");
            pst3=con3.prepareStatement("INSERT INTO commandes (DATECMD, FRAISDEPORTCMD, NBARTICLE, TOTALHT, TVA, TOTALTTC, NOMCLIENT, PRENOMCLIENT) VALUES (?, ?, ?, ?, ?, ?, ?, ?)");
            
            pst3.setString(1, dateCmd); //
            pst3.setString(2, fraisPort);
            pst3.setInt(3, nbArticle);
            pst3.setString(4, totalHT);
            pst3.setString(5, tva);
            pst3.setString(6, totalTTC);
            pst3.setString(7, nom);
            pst3.setString(8, Prenom);
            
            pst3.executeUpdate();
            
            JOptionPane.showMessageDialog(this, "La commande à été validée"); // pour afficher une fenetre
            
            
        }   catch (SQLException ex) {
                Logger.getLogger(XprodDesktopAdmin.class.getName()).log(Level.SEVERE, null, ex);
        }   catch (ClassNotFoundException ex) {
                Logger.getLogger(XprodDesktopAdmin.class.getName()).log(Level.SEVERE, null, ex);
        }
                                      
    }//GEN-LAST:event_btnValiderActionPerformed

    private void btnAjouterClientActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAjouterClientActionPerformed
        Client newClient = new Client();
        newClient.setVisible(true);
    }//GEN-LAST:event_btnAjouterClientActionPerformed

    private void btnSuppLigneActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSuppLigneActionPerformed
        DefaultTableModel dtm = (DefaultTableModel) tabCOMMANDE.getModel();
        
    
    }//GEN-LAST:event_btnSuppLigneActionPerformed

    
    /**
     * @param args the command line arguments
     */
  
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(GestionCommande.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(GestionCommande.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(GestionCommande.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(GestionCommande.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new GestionCommande().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAjouterClient;
    private javax.swing.JButton btnCreer;
    private javax.swing.JButton btnImprimer;
    private javax.swing.JButton btnRetour;
    private javax.swing.JButton btnSuppLigne;
    private javax.swing.JButton btnValider;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JTable tabCLIENT;
    private javax.swing.JTable tabCOMMANDE;
    private javax.swing.JTable tabPRODUIT;
    private javax.swing.JTextField txtDESCRIPTIF;
    private javax.swing.JTextField txtDESIGNATION;
    private javax.swing.JTextField txtFRAISPORT;
    private javax.swing.JTextArea txtFacture;
    private javax.swing.JTextField txtNOM;
    private javax.swing.JTextField txtPRENOM;
    private javax.swing.JTextField txtPRIXTTC;
    private javax.swing.JTextField txtPRIXUHT;
    private javax.swing.JTextField txtQUANTITE;
    private javax.swing.JTextField txtREF;
    private javax.swing.JTextField txtTOTALHT;
    private javax.swing.JTextField txtTVA;
    // End of variables declaration//GEN-END:variables

    /**
     * @return the btnRetour
     */
 
}
